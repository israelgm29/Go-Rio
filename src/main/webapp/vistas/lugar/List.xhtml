<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:composition template="/template.xhtml">
        <ui:define name="title">
            <h:outputText value="#{bundle.ListLugarTitle}"></h:outputText>
        </ui:define>
        <ui:define name="body">

            <h:panelGroup id="messagePanel" layout="block">
                <h:messages errorStyle="color: red" infoStyle="color: green" layout="table"/>
            </h:panelGroup>
            <h:outputText escape="false" value="#{bundle.ListLugarEmpty}" rendered="#{lugarController.items.rowCount == 0}"/>
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">

                    <button
                        class="navbar-toggler"
                        type="button"
                        data-mdb-toggle="collapse"
                        data-mdb-target="#navbarSupportedContent"
                        aria-controls="navbarSupportedContent"
                        aria-expanded="false"
                        aria-label="Toggle navigation"
                        >
                        <i class="fas fa-bars"></i>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarCollapse">

                        <ul class="navbar-nav me-auto mb-2 mb-md-0">

                            <li class="nav-item">
                                <h:form>
                                    <h:commandLink class="nav-link active btn btn-default btn-sm"  action="#{lugarController.prepareCreate}">
                                        <i class="fas fa-map-marked-alt"></i>  #{bundle.ListLugarCreateLink}
                                    </h:commandLink>
                                </h:form>
                            </li>

                        </ul>

                        <div class="d-flex">
                            <input type="search" class="card-filter form-control" placeholder="Buscar..." autocomplete="off"/>

                        </div>
                    </div>
                </div>
            </nav>
            <h:form prependId="false">

                <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">
                    <ui:repeat id="lugares" value="#{lugarController.items}" var="item" rendered="#{searchLugarController.b}">

                        <div class="card shadow-sm me-3" style="width: 27rem;">
                            <div class="card-body">
                                <h6 class="card-title fw-bold">#{item.nombre}</h6>
                                <h:graphicImage class="card-img-top" width="382px" height="188px" value="#{item.imagen}"/>
                                <span class="badge rounded-pill bg-primary"> Categoria: #{item.categoria}</span>
                                <div class="d-flex justify-content-center pt-2">
                                    <h:commandLink class="btn btn-default btn-sm" action="#{lugarController.prepareView}">
                                        <i class="fas fa-bars"></i>  #{bundle.ListLugarViewLink} 
                                    </h:commandLink>
                                    <h:commandLink class="btn btn-default btn-sm" action="#{lugarController.prepareEdit}">
                                        <i class="far fa-edit text-primary"></i>  #{bundle.ListLugarEditLink}
                                    </h:commandLink>
                                    <h:commandLink class="btn btn-default btn-sm" action="#{lugarController.destroy}">
                                        <i class="far fa-trash-alt text-danger"></i>  #{bundle.ListLugarDestroyLink}
                                    </h:commandLink>
                                </div>
                            </div>
                        </div>

                    </ui:repeat>

                </div>
            </h:form>

            <footer class="text-center text-white" style="background-color: #f1f1f1;">
                <!-- Grid container -->
                <div class="container pt-4">
                    <!-- Section: Social media -->
                    <section class="mb-4">
                        <!-- Facebook -->
                        <a
                            class="btn btn-link btn-floating btn-lg text-dark m-1"
                            href="#!"
                            role="button"
                            data-mdb-ripple-color="dark"
                            ><i class="fab fa-facebook-f"></i
                            ></a>

                        <!-- Twitter -->
                        <a
                            class="btn btn-link btn-floating btn-lg text-dark m-1"
                            href="#!"
                            role="button"
                            data-mdb-ripple-color="dark"
                            ><i class="fab fa-twitter"></i
                            ></a>

                        <!-- Google -->
                        <a
                            class="btn btn-link btn-floating btn-lg text-dark m-1"
                            href="#!"
                            role="button"
                            data-mdb-ripple-color="dark"
                            ><i class="fab fa-google"></i
                            ></a>

                        <!-- Instagram -->
                        <a
                            class="btn btn-link btn-floating btn-lg text-dark m-1"
                            href="#!"
                            role="button"
                            data-mdb-ripple-color="dark"
                            ><i class="fab fa-instagram"></i
                            ></a>

                        <!-- Linkedin -->
                        <a
                            class="btn btn-link btn-floating btn-lg text-dark m-1"
                            href="#!"
                            role="button"
                            data-mdb-ripple-color="dark"
                            ><i class="fab fa-linkedin"></i
                            ></a>
                        <!-- Github -->
                        <a
                            class="btn btn-link btn-floating btn-lg text-dark m-1"
                            href="#!"
                            role="button"
                            data-mdb-ripple-color="dark"
                            ><i class="fab fa-github"></i
                            ></a>
                    </section>
                    <!-- Section: Social media -->
                </div>
                <!-- Grid container -->

                <!-- Copyright -->
                <div class="text-center text-dark p-3" style="background-color: rgba(0, 0, 0, 0.2);">
                    Â© 2020 Copyright:
                    <a class="text-dark" href="https://mdbootstrap.com/">MDBootstrap.com</a>
                </div>
                <!-- Copyright -->
            </footer>
            <script>
                var d = document;
                function searchFilter() {
                    d.addEventListener("keyup", e => {
                        if (e.target.matches(".card-filter")) {
                            //console.log(e.target.value);
                            d.querySelectorAll('.card').forEach((el) =>
                                el.textContent.toLowerCase().includes(e.target.value)
                                        ? el.classList.remove("order-1", "animate__animated", "animate__zoomOut")
                                        : el.classList.add("order-1", "animate__animated", "animate__zoomOut")

                            );
                        }
                    });
                }
                searchFilter();
            </script>
        </ui:define>
    </ui:composition>

</html>
